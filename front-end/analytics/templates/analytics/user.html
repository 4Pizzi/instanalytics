{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <meta charset="UTF-8">
    <title>Instanalytics @{{ username }}</title>
    <style>
        body {
            margin: 0;
            font-family: Apercu, sans-serif;
            text-rendering: optimizelegibility;
            display: flex;
            flex-direction: column;
            background-color: #0a0b29;

            }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            border-radius: 10px;
            background-color: rgba(77,25,51, 0.4);
        }

        ::-webkit-scrollbar-thumb {
             border-radius: 10px;
            background-color: rgba(77,25,51, 1);
        }

        .header-content{
            width: 100%;
            background-image: url({% static './img/background-texture.png' %});
            position: sticky;
            top: 0;
            z-index: 10;
            height: auto;
            display: flex;
            flex-direction: column;
            line-height: 1.5;
            color: white;
            background-color: #0a0b29;
            transition: height 200ms;
        }

        .top-header{
            position: relative;
            display: flex;
            flex-direction: row;
            line-height: 1.5;
            align-items: center;
            color: white;
            height: 50px;
        }

        nav{
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }

        .logo{
            width: 50%;
            padding: 0 20px;
            display: flex;
            flex-direction: row;
        }

        .top-header a:link{
            color: white;
        }

        .top-header a:visited{
            color: white;
        }

        .top-header ul {
            margin: 0;
            padding: 0;
            list-style-type: none;
            display: flex;
            width: 50%;
            justify-content: flex-end;

        }

        .top-header ul li {
            margin: 0 0.5em;
            display: flex;
            align-items: center;
            align-content: center;
        }



        .profile-info{
            /*background-color: #090a26;*/
            position: relative;
            width: 100%;
            /*box-shadow:0 5px 15px #0f102c;*/
            display: flex;
            flex-direction: column;
            height: 300px;
        }

        .profile-first-info{
            width: 100%;
            position: sticky;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }

        .first-item{
            display: flex;
            justify-content: center;
            font-size: 2.4rem;
            font-weight: 700;
        }

        #name-item{
            position: absolute;
            font-size: 7rem;
            left: 10px;
            color: white;
            opacity: 50%;
            top: 0px;
            font-weight: 900;
            background: linear-gradient(to right, #fffc00 0%, #ffffff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        section {
            margin-top: 10em;
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .body-content{
            position: relative;
            font-size: 1.6em;
            display: flex;
            flex-direction: column;
            width: 100%;
            background-color: #0a0b29;
            color: white;
        }

        .body-content p{
            font-size: 0.7em;
            margin-top: -1em;
        }

        .profile{
            margin-top: 3em;
            width: 50%;
            height: 50%;
            border-radius: 50%;
            border: 0.1em solid white ;
        }

        .profile-mini {
            border-radius: 50%;
            border: 0.1em solid white ;
        }

        .top-info{
            position: relative;
            height: 80%;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .profile-info-preview ul{
            margin: 0;
            padding: 0;
            list-style-type: none;
            display: flex;
            flex-direction: row;
            justify-content: center;
            text-align: center;
        }


        .profile-info-preview ul li {
            margin: 0 0.5em;
            padding-top: 0.25em;
            width: 100%;
            border-top: solid white 0.1em;
            transition: all 0.5s;
        }

        .profile-info-preview ul li:hover {
            border-top: solid #BB377D 0.1em;
        }


        .profile-bio{
            font-size: 1.3rem;
            text-align: center;
            padding: 20px;

        }

        .preview-label{
            font-size: 1rem;
        }

        .post-preview {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            width: 100%;
            height: max-content;
            align-items: center;
            justify-content: center;

        }

        .post-preview-max-likes {
            display: flex;
            flex-direction: row;
            padding: 0px;
            width: 100%;
            height: max-content;
            align-items: center;
            justify-content: center;
        }

        .post-info{
            width: 240px;
            position: absolute;
            display: flex;
            flex-direction: row;
            font-size: 1rem;
            padding: 0em;   
        }

        .post-info-max-likes{
            position: relative;
            display: flex;
            flex-direction: column;
            font-size: 1rem;
        }

        .like-counter, .comment-counter{
            width: auto;
            display: flex;
            flex-direction: row;
            height: 440px;
            justify-content: center;
            align-items: flex-end;
            margin: auto auto;
        }

        .max-like-counter, .max-comment-counter{
            width: auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        a {
            text-decoration: none;
            color: white;   
            font-weight: bold;
            outline: 0;
            border: none;
            -moz-outline-style: none;
        }


        .post{
            width: 300px;
            height: 470px;
            padding: 0em 3% 20px 3%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;

        }

        .preview{
            position: absolute;
            display: flex;
            flex-direction: row;
            top: 100px;
            left: 100px;
        }
        .dontshow{
            display: none;
        }

        .post_pic{
            width: 10em;
            z-index: 1;
            border: solid white 0.1em;
        }

        .post_pic:hover{
            border: solid black 0.1em;
            background-color: black;
            opacity: 0.5;
        }
        #body-content-post{
            height: max-content;
        }

        #body-comment-post ul{
            list-style-type: none;
            display: flex;
            flex-direction: column;
            height: auto;
            width: auto;
            align-items: center;
        }

        #body-comment-post ul li {
            margin-top: 1em;
            display: flex;
            flex-direction: column;
            font-size: 1.2rem;
        }

        .slideanim {
            visibility:hidden;
            visibility:visible\9;/*For old IE browsers IE6-8 */
        }

        .slideanim.slide {                  
            visibility: visible;                  
            animation: slide 1s;
        }

        .slideanim::after {
            /* useful when its child elements are float:left; */
            content: "";
            display: table;
            clear: both;
        }

        @keyframes slide {
            0% {
                opacity: 0;
                transform: translateY(50%);
            } 
            100% {
                opacity: 1;
                transform: translateY(0);
            } 
        }


        #topBtn {
            margin: 2em auto;
            text-transform: uppercase;
        }

        #topBtn:hover  {
            cursor: pointer;
        }



        .example {
        cursor: pointer;
        position: relative;
        overflow: hidden;
        text-align: center;
      }
      .example .fadedbox {
        /*background-color: #666666;*/
        position: absolute;
        top: 0;
        left: 0;
        color: #fff;
        -webkit-transition: all 300ms ease-out;
        -moz-transition: all 300ms ease-out;
        -o-transition: all 300ms ease-out;
        -ms-transition: all 300ms ease-out;
        transition: all 300ms ease-out;
        opacity: 1;
        width: 100%;
        height: 100px;
      }

      .example:hover .fadedbox {
        opacity: 1;
      }

      .example .text {
        -webkit-transition: all 300ms ease-out;
        -moz-transition: all 300ms ease-out;
        -o-transition: all 300ms ease-out;
        -ms-transition: all 300ms ease-out;
        transition: all 300ms ease-out;
        transform: translateX(30px);
        -webkit-transform: translateX(30px);
        padding-top: 4.4em;
      }
      
      .example .title {
        font-size: 2.5em;
        text-transform: uppercase;
        opacity: 0;
        transition-delay: 0.1s;
        transition-duration: 0.5s;
      }
      .example:hover .title,
      .example:focus .title {
        opacity: 1;
        transform: translateX(0px);
        -webkit-transform: translateX(0px);
      }

    #download-statistics {
        cursor: pointer;
        text-align: center;
        width: 100%; 
        padding-top: 2em; 
        border-top: 0px; 
        font-size: 0.8em; 
    }

    /*back to top button*/
    #backtop {
	        position: fixed;
            left:auto;
            right: 20px;
            top:auto;
            bottom: 20px;
	        outline: none;
            overflow:hidden;
            color:#fff;
            text-align:center;
            background-color:rgba(49,79,96,0.84);
            height:40px;
            width:40px;
            line-height:40px;
            font-size:14px;
            border-radius:2px;
            cursor:pointer;
            transition:all 0.3s linear;
            z-index:999999;
            opacity:1;
            display:none;
        }
        #backtop:hover {
            background-color:#27CFC3;
        }
        #backtop.mcOut {
            opacity:0;
        }
    /*end of back top button*/


    #pos-com-text {
        text-align: center;
        margin: 0 3em;
        font-style: italic;
    }
   
    #neg-com-text {
        text-align: center;
        margin: 0 3em;
        font-style: italic;
    }


    .sent-head {
        text-align: center;
        margin: 7em auto 0 auto;
    }

    .biagram-head {
        font-weight: bold;
    }


    table {
        padding-top: 1em;
    }
    th, td {
        padding-left: 1em;
        padding-right: 1em;
        text-align: center;
    }

    #comment-text h3 {
        margin-top: 10em;
    }
  

    

    </style>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/wordcloud.js"></script>

<script>
    var floatPanel = new McFloatPanel();
/* Float Panel v2016.10.28. Copyright www.menucool.com */
function McFloatPanel() { var i = [], s = [], h = "className", t = "getElementsByClassName", d = "length", l = "display", C = "transition", m = "style", B = "height", c = "scrollTop", k = "offsetHeight", a = "fixed", e = document, b = document.documentElement, j = function (a, c, b) { if (a.addEventListener) a.addEventListener(c, b, false); else a.attachEvent && a.attachEvent("on" + c, b) }, o = function (c, d) { if (typeof getComputedStyle != "undefined") var b = getComputedStyle(c, null); else b = c.currentStyle; return b ? b[d] : a }, L = function () { var a = e.body; return Math.max(a.scrollHeight, a[k], b.clientHeight, b.scrollHeight, b[k]) }, O = function (a, c) { var b = a[d]; while (b--) if (a[b] === c) return true; return false }, g = function (b, a) { return O(b[h].split(" "), a) }, q = function (a, b) { if (!g(a, b)) if (!a[h]) a[h] = b; else a[h] += " " + b }, p = function (a, f) { if (a[h] && g(a, f)) { for (var e = "", c = a[h].split(" "), b = 0, i = c[d]; b < i; b++)if (c[b] !== f) e += c[b] + " "; a[h] = e.replace(/^\s+|\s+$/g, "") } }, n = function () { return window.pageYOffset || b[c] }, z = function (a) { return a.getBoundingClientRect().top }, F = function (b) { var c = n(); if (c > b.oS && !g(b, a)) q(b, a); else g(b, a) && c < b.oS && p(b, a) }, x = function () { for (var a = 0; a < s[d]; a++)J(s[a]) }, J = function (a) { if (a.oS) { a.fT && clearTimeout(a.fT); a.fT = setTimeout(function () { if (a.aF) F(a); else y(a) }, 50) } else y(a) }, w = function (d, c, b) { p(d, a); c[l] = "none"; b.position = b.top = "" }, y = function (c) { var j = z(c), f = c[k], e = c[m], d = c.pH[m], h = n(); if (j < c.oT && h > c.oS && !g(c, a) && (window.innerHeight || b.clientHeight) > f) { c.tP = h + j - c.oT; var p = L(); if (f > p - c.tP - f) var i = f; else i = 0; d[l] = "block"; d[C] = "none"; d[B] = f + 1 + "px"; c.pH[k]; d[C] = "height .3s"; d[B] = i + "px"; q(c, a); e.position = a; e.top = c.oT + "px"; if (o(c, "position") != a) d[l] = "none" } else if (g(c, a) && (h < c.tP || h < c.oS)) { var s = o(c, "animation"); if (c.oS && c.classList && s.indexOf("slide-down") != -1) { var r = o(c, "animationDuration"); c.classList.remove(a); e.animationDirection = "reverse"; e.animationDuration = "300ms"; void c[k]; c.classList.add(a); setTimeout(function () { w(c, d, e); e.animationDirection = "normal"; e.animationDuration = r }, 300) } else w(c, d, e) } }, I = function () { var f = [], c, b; if (e[t]) { f = e[t]("float-panel"); i = e[t]("slideanim") } else { var k = e.getElementsByTagName("*"); c = k[d]; while (c--) g(k[c], "float-panel") && f.push(k[c]) } c = f[d]; for (var h = 0; h < c; h++) { b = s[h] = f[h]; b.oT = parseInt(b.getAttribute("data-top") || 0); b.oS = parseInt(b.getAttribute("data-scroll") || 0); if (b.oS > 20 && o(b, "position") == a) b.aF = 1; b.pH = e.createElement("div"); b.pH[m].width = b.offsetWidth + "px"; b.pH[m][l] = "none"; b.parentNode.insertBefore(b.pH, b.nextSibling) } if (s[d]) { setTimeout(x, 160); j(window, "scroll", x) } }, f, D = 200, E = 0, r, u, H = function () { return window.innerWidth || b.clientWidth || e.body.clientWidth }; function K() { if (!r) r = setInterval(function () { var a = e.body; if (a[c] < 3) a[c] = 0; else a[c] = a[c] / 1.3; if (b[c] < 3) b[c] = 0; else b[c] = b[c] / 1.3; if (!n()) { clearInterval(r); r = null } }, 14) } function A() { clearTimeout(u); if (n() > D && H() > E) { u = setTimeout(function () { p(f, "mcOut") }, 60); f[m][l] = "block" } else { q(f, "mcOut"); u = setTimeout(function () { f[m][l] = "none" }, 500) } } var N = function () { f = e.getElementById("backtop"); if (f) { var a = f.getAttribute("data-v-w"); if (a) { a = a.replace(/\s/g, "").split(","); D = parseInt(a[0]); if (a[d] > 1) E = parseInt(a[1]) } j(f, "click", K); j(window, "scroll", A); A() } }, v = function () { for (var c = n(), e = c + window.innerHeight, g = i[d], b, f, a = 0; a < g; a++) { b = c + z(i[a]), f = b + i[a][k]; if (b < e) q(i[a], "slide"); else p(i[a], "slide") } }, G = function () { if (i[d]) { j(window, "scroll", v); v() } }, M = function () { I(); N(); G() }; j(window, "load", M); j(document, "touchstart", function () { }) }
</script>

<script>
    $(window).scroll(function (event) {
        var scroll = $(window).scrollTop();
        // console.log(scroll)
     });

</script>
<script>



    function connect(shortcode) {
        var ul = document.getElementById("comment-text");
        while( ul.firstChild ){
            ul.removeChild( ul.firstChild );
        }
        //window.location.href = "#comment-text";
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (xhttp.readyState === XMLHttpRequest.DONE) {
                var reply = xhttp.responseText;

                sentiment_analysis = JSON.parse(reply);
                //console.log(sentiment_analysis['pop_com']);

                // Display sentiment analysis 
                var anchor = document.createElement('p');
                anchor.setAttribute("id", "anchor");
                ul.appendChild(anchor);

                var sent_header = document.createElement('h2');
                var sent_p = document.createElement('p');
                
                sent_header.textContent = "SENTIMENT ANALYSIS";
                sent_p.textContent = "Discover how other people react to your photos";
                sent_header.setAttribute("data-aos", "flip-up");
                sent_p.setAttribute("data-aos", "zoom-in");
        
                ul.appendChild(sent_header);
                ul.appendChild(sent_p);

                window.location.hash = "#anchor";

                //Display most positive comment 
                var pos_com_h3 = document.createElement('h3');
                pos_com_h3.textContent = "THE MOST POSITIVE COMMENT";
                pos_com_h3.setAttribute("class", "sent-head");
                pos_com_h3.setAttribute("data-aos", "fade-left");
                //h3.setAttribute('class', 'note');
                ul.appendChild(pos_com_h3);
                var pos_com = document.createElement("li");
                pos_com.setAttribute("data-aos", "fade-up");
                pos_com.setAttribute("id", "pos-com-text");
                pos_com.appendChild(document.createTextNode("\"".concat(sentiment_analysis["pos_com"], "\"")));
                ul.appendChild(pos_com);

                //Display most negative comment 
                var neg_com_h3 = document.createElement('h3');
                neg_com_h3.textContent = "THE MOST NEGATIVE COMMENT";
                neg_com_h3.setAttribute("class", "sent-head");
                neg_com_h3.setAttribute("data-aos", "fade-right");
                //h3.setAttribute('class', 'note');
                ul.appendChild(neg_com_h3);

                var neg_com = document.createElement("li");
                neg_com.setAttribute("class", "sent-head");
                neg_com.setAttribute("data-aos", "fade-up");
                neg_com.setAttribute("id", "neg-com-text");
                neg_com.appendChild(document.createTextNode("\"".concat(sentiment_analysis["neg_com"], "\"")));
                ul.appendChild(neg_com);

                //Display most popular biagram
                var biagram = document.createElement('h3');
                biagram.textContent = "THE MOST POPULAR BIAGRAM";
                biagram.setAttribute("class", "sent-head");
                biagram.setAttribute("data-aos", "flip-up");
                //h3.setAttribute('class', 'note');
                ul.appendChild(biagram);

                var biagram_inx = document.createElement("li");
                biagram_inx.setAttribute("class", "biagram-head");
                biagram_inx.setAttribute("data-aos", "flip-up");
                biagram_inx.appendChild(document.createTextNode(sentiment_analysis["bi_idx"].join(" ")));
                ul.appendChild(biagram_inx);

                var biagram_cnt = document.createElement("li");
                biagram_cnt.setAttribute("class", "biagram-head");
                biagram_cnt.setAttribute("data-aos", "flip-up");
                biagram_cnt.appendChild(document.createTextNode(sentiment_analysis["bi_cnt"]));
                ul.appendChild(biagram_cnt);

                //Display most popular comment
                var pop_comments_h3 = document.createElement('h3');
                pop_comments_h3.textContent = "MOST POPULAR COMMENTS";
                pop_comments_h3.setAttribute("class", "sent-head");
                pop_comments_h3.setAttribute("data-aos", "fade-up");

                //h3.setAttribute('class', 'note');
                ul.appendChild(pop_comments_h3);

                var pop_comments = document.createElement("table");
                pop_comments.setAttribute("data-aos", "fade-down");
                var columnCount = 2;
                //Add the data rows.
                for (var i = 1; i < sentiment_analysis["pop_com"][0].length; i++) {
                    row = pop_comments.insertRow(-1);
                    for (var j = 0; j < columnCount; j++) {
                        var cell = row.insertCell(-1);
                        cell.innerHTML = sentiment_analysis["pop_com"][j][i];
                    }
                }
 
                ul.appendChild(pop_comments);  
            }
        };
        
        var host = "http://192.168.2.15:5000/a/"+shortcode;
        //console.log(shortcode)
        xhttp.open("POST", host, true);
        xhttp.setRequestHeader('Access-Control-Allow-Origin', '*');
        xhttp.setRequestHeader('Access-Control-Allow-Credentials', 'true');
        xhttp.setRequestHeader('Access-Control-Allow-Methods', 'POST');
        xhttp.setRequestHeader('Access-Control-Allow-Headers', 'Content-Type');
        xhttp.send();
    }

        function topFunction() {
            window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function postInfo(e) {
        console.log(e);
        document.getElementsByClassName("like-counter")[0].style.opacity = "1";
    }
</script>
<body>
    <div id="backtop">&#9650;</div>
    <header class="header-content">
        <nav class="top-header" id="header-bar">
            <div class="logo">
                <h2><a style="text-decoration:none" href="/analytics/">instanalytics</a></h2>
            </div>
                <ul class="top-header-list">
                    <li></li>
                    <li>&commat;{{ username }}</li>
                    <li><img class="profile-mini" src="{{ url }}" height="40px"alt=" mini-profile" onContextMenu="return false;"></li>
                </ul>
        </nav>

    </header>
    <section style="margin-top: 0px" class="body-content">
        <div id="name-item">{{ fullname }}</div>
        <div class="top-info">
            <div class="profile-info" id="prf-info">
            <div class="profile-first-info">

                <div class="first-item"><img class="profile" src="{{ url }}" height="300px" alt="profile" onContextMenu="return false;"></div>
            </div>
        </div>
            <div class="profile-bio">{{ bio }}</div>
            <div class="profile-info-preview">
                <ul id="preview-data">
                    <li>{{ n_post }}<div class="preview-label">Post</div></li>
                    <li>{{ n_followers }}<div class="preview-label">Followers</div></li>
                    <li>{{ n_following }}<div class="preview-label">Following</div></li>
                </ul>
                <ul>
                    <li id="download-statistics">😎 Download all statistics 🚀</li>
                </ul>

            </div>
        </div>
    </section>
    <section class="body-content" id="body-content-post">
        <div class="dontshow" id="url_post">{{list_url_post.0}}</div>
        <h2 data-aos="fade-up">LAST 12 POSTS</h2>
        <div class="post-preview">
            {% for item in shortcode_url %}
            <div class="post example" data-aos="fade-up">
                <img class="post_pic" src="{{ item.1 }}" alt="post" onContextMenu="return false;" onclick="connect('{{ item.0}}')">
                <div class="post-info">
                    <div class="fadedbox">
                        <div class="title text">Discover More</div>
                    </div>
                        <div class="like-counter">{{ item.2}} 👍🏻</div><br>
                        <div class="comment-counter">{{ item.3}} 💬</div>
                        <a class="like-counter" href="{{ item.1 }}" download>HD 📥</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <section class="body-content">
        <div style="text-align: center;">
            <h3 data-aos="fade-up">HOURLY TREND</h3>
            <p data-aos="fade-up">Check when it's better to post your photo</p>
        </div>
    <div data-aos="zoom-in-up" id="container" style="width: 80%; height: 400px;;">
    </div>
        <script>
            $(function () {

  $('#container').highcharts({
        chart: {
            type: 'column',
            backgroundColor: '#0a0b29'
        },
        title: {
            text: '',
            style: {
              color: '#fff'
            }
        },
        xAxis: {
            tickWidth: 0,
            labels: {
              style: {
                  color: '#fff',
                 }
              },
            categories: ['12am', '1am', '2am', '3am', '4am', '5am', '6am','7am','8am','9am','10am','11am', '12pm','1pm', '2pm', '3pm', '4pm', '5pm', '6pm','7pm','8pm','9pm','10pm','11pm']
        },
        yAxis: {
           gridLineWidth: .5,
		      gridLineDashStyle: 'dash',
		      gridLineColor: 'white',
           title: {
                text: '',
                style: {
                  color: '#dbdbdb'
                 }
            },
            labels: {
               formatter: function() {
                        return Highcharts.numberFormat(this.value, 0, '', ',');
                    },
              style: {
                  color: '#fff',
                 }
              }
            },
        legend: {
            enabled: false,
        },
        credits: {
            enabled: false
        },
        plotOptions: {
		      column: {
			      borderRadius: 0,
             pointPadding: -0.12,
			      groupPadding: 0.1
            }
		    },
        series: [{
            name: 'Like',
            color: "#77dd77",
            borderColor:"#0a0b29",
            data: {{overall_timestamp}}


        }]
    });
});
        </script>
    </section>

    <!-- function for most popular hashtag -->
    <section class="body-content slideanim">
        <div data-aos="fade-up" style="text-align: center;">
            <h2>POPULAR HASHTAG</h2>
            <p>See which hashtags get more like</p>
        </div>
        <div data-aos="fade-up" id="container2" style="width:80%; height:400px;">
        </div>
        <script>
            $(function () {

  $('#container2').highcharts({
        chart: {
            type: 'bar',
            backgroundColor: '#0a0b29'
        },
        title: {
            text: '',
            style: {
              color: '#fff'
            }
        },
        xAxis: {
            tickInterval: 1,
            tickWidth: 0,
            labels: {
              style: {
                  color: '#fff',
                 }
              },
            categories: {{ popular_hashtag.0|safe}}
        },
        yAxis: {
           tickInterval: 1,
           gridLineWidth: .5,
		      gridLineDashStyle: 'dash',
		      gridLineColor: 'white',
           title: {
                text: '',
                style: {
                  color: '#dbdbdb'
                 }
            },
            labels: {
               formatter: function() {
                        return Highcharts.numberFormat(this.value, 0, '', ',');
                    },
              style: {
                  color: '#fff',
                 }
              }
            },
        legend: {
            enabled: false,
        },
        credits: {
            enabled: false
        },
        plotOptions: {
		      column: {
			      borderRadius: 0,
             pointPadding: -0.12,
			      groupPadding: 0.1
            }
		    },
        series: [{
            name: 'count',
            color: "#FFD662",
            borderColor:"#0a0b29",
            data: {{ popular_hashtag.1 }}


        }]
    });
});
        </script>
    </section>


    <!-- function for most popular tag -->
    <section class="body-content slideanim">
        <div data-aos="flip-up" style="text-align: center;">
            <h2>POPULAR TAG</h2>
            <p>See which tags get more like</p>
        </div>
        <div data-aos="flip-right" id="container3" style="width:80%; height:400px;">
        </div>
        <script>
            $(function () {

  $('#container3').highcharts({
        chart: {
            type: 'column',
            backgroundColor: '#0a0b29'
        },
        title: {
            text: '',
            style: {
              color: '#fff'
            }
        },
        xAxis: {
            tickWidth: 0,
            labels: {
              style: {
                  color: '#fff',
                 }
              },
            categories: {{ popular_tag.0|safe}}
        },
        yAxis: {
           tickInterval: 1,

           gridLineWidth: 0.5,
		      gridLineDashStyle: 'dash',
		      gridLineColor: 'white',
           title: {
                text: '',
                style: {
                  color: '#dbdbdb'
                 }
            },
            labels: {
               formatter: function() {
                        return Highcharts.numberFormat(this.value, 0, '', ',');
                    },
              style: {
                  color: '#fff',
                 }
              }
            },
        legend: {
            enabled: false,
        },
        credits: {
            enabled: false
        },
        plotOptions: {
		      column: {
			      borderRadius: 0,
             pointPadding: -0.12,
			      groupPadding: 0.2
            }
		    },
        series: [{
            name: 'count',
            color: "#E94B3C",
            borderColor:"#0a0b29",
            data: {{ popular_tag.1 }}

        }]
    });
});
        </script>
    </section>
    
    <section class="body-content">
        <div data-aos="fade-up" style="text-align: center;">
            <h2>LIKES &amp; COMMENTS</h2>
            <p>Compare the number of likes and comments for each post</p>
        </div>
        <div data-aos="fade-up" id="container4" style="width:80%; height:50%">
    </div>
        <script>
            $(function () {

  $('#container4').highcharts({
        chart: {
            type: 'column',
            backgroundColor: '#0a0b29'
        },
        title: {
            text: '',
            style: {
              color: '#fff'
            }
        },
        
        xAxis: {
            tickWidth: 0,
            labels: {
              style: {
                  color: '#fff',
                 }
              },
            categories: {{ post_timestamp|safe }}
        },
        yAxis: {
           tickInterval: 25,

           gridLineWidth: 0.5,
		      gridLineDashStyle: 'dash',
		      gridLineColor: 'white',
           title: {
                text: '',
                style: {
                  color: '#dbdbdb'
                 }
            },
            labels: {
               formatter: function() {
                        return Highcharts.numberFormat(this.value, 0, '', ',');
                    },
              style: {
                  color: '#fff',
                 }
              }
            },
        legend: {
            align: 'right',
            floating: 'true',
            verticalAlign: 'top',
            itemStyle: {
                color: 'white',
                fontWeight: 'bold'
            }
        },
        credits: {
            enabled: false
        },
        plotOptions: {
		      column: {
			      borderRadius: 0,
                  pointPadding: -0.12,
                  groupPadding: 0.3,
                  grouping: false
            }
		    },
        series: [{
            name: 'Likes',
            color: "#4992fb",
            borderColor:"#0a0b29",
            data: {{ likes_and_comments.0 }},

        },{
            name: 'Comments',
            color: "#f6ca48",
            borderColor:"#0a0b29",
            data: {{ likes_and_comments.1 }},

        }]
    });
});
        </script>
    </section>

    <!-- section of picture with max likes and relative hashtag -->
    <section class="body-content" id="body-content-post-max-likes">
        <div class="post-preview-max-likes">
            <h2 data-aos="fade-up">THE MOST LIKED PHOTO</h2>
            <div class="post" data-aos="flip-right"><img style="width: 10em; border: 0.1em solid white;" src="{{ max_likes_hashtag.2 }}" alt="post" onContextMenu="return false;">
            </div>
            <div class="post-info-max-likes">
                <div class="max-like-counter" data-aos="fade-down" style="padding-bottom: 1em;">{{ max_likes_hashtag.0}} 👍🏻</div>
                {% for item in max_likes_hashtag.1 %}
                <div class="max-comment-counter" data-aos="fade-down">{{ item}}</div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- section of picture with max comments and relative hashtag -->
    <section class="body-content" id="body-content-post-max-comments">
        <div class="post-preview-max-likes">
            <div class="post-info-max-likes">
                <div class="max-like-counter" data-aos="fade-down" style="padding-bottom: 1em;">{{ max_comments_hashtag.0}} 💬</div>
                {% for item in max_comments_hashtag.1 %}
                <div class="max-comment-counter" data-aos="fade-down">{{ item}}</div>
                {% endfor %}
            </div>
            <div class="post" data-aos="flip-left"><img style="width: 10em; border: 0.1em solid white;" src="{{ max_comments_hashtag.2 }}" alt="post" onContextMenu="return false;">
            </div>
            <h2 data-aos="fade-up">THE MOST COMMENTED PHOTO</h2>
        </div>
    </section>

    <!-- section of hashtag from the most likes and most commented posts -->
    <section class="body-content" id="body-content-wordcloud-hashtag">
    <div data-aos="fade-up" style="text-align: center;">
        <h2>MOST PAYING HASHTAG</h2>
        <p>Explore what hashtags contribute most to get likes and comments</p>
    </div>
    <figure class="highcharts-figure">
        <div data-aos="fade-left" id="paying-hashtag" style="width:100%; height:100%"></div>
    </figure>
    <script>
    var text = "{{cross_common_hashtag|safe}}";
    text = text.replace(/[,''[]/g, "");
    text = text.replace(/]/g, "");

    var lines = text.split(/[" "]+/g),
        data = Highcharts.reduce(lines, function (arr, word) {
            var obj = Highcharts.find(arr, function (obj) {
                return obj.name === word;
            });
            if (obj) {
                obj.weight += 1;
            } else {
                obj = {
                    name: word,
                    weight: 1
                };
                arr.push(obj);
            }
            return arr;
        }, []);
    
    Highcharts.chart('paying-hashtag', {
        chart: {
            backgroundColor: '#0a0b29'
        },
        credits: {
            enabled: false
        },
        series: [{
            type: 'wordcloud',
            data: data,
            name: 'Occurrences',
            rotation: {
                from: 0,
                to: 0,
            },
        }],
        title: {
            text: '',
            style: {
                color: '#FFF',
        }
    }
});
    </script>
    </section>



    <!-- section of words most occuring in the accessibility caption -->
    <section class="body-content" id="body-content-wordcloud-photo-description">
        <div data-aos="fade-up" style="text-align: center;"">
            <h2>YOUR PHOTOS' SUBJECTS</h2>
            <p>Observe which are the most common subjects in your photos</p>
        </div>
        <figure class="highcharts-figure">
            <div id="photo-description" data-aos="fade-right"></div>
        </figure>
        <script>
        var text = "{{photo_description|safe}}";
        text = text.replace(/[,''[]/g, "");
        text = text.replace(/]/g, "");
    
        var lines = text.split(/[" "]+/g),
            data = Highcharts.reduce(lines, function (arr, word) {
                var obj = Highcharts.find(arr, function (obj) {
                    return obj.name === word;
                });
                if (obj) {
                    obj.weight += 1;
                } else {
                    obj = {
                        name: word,
                        weight: 1
                    };
                    arr.push(obj);
                }
                return arr;
            }, []);
        
        Highcharts.chart('photo-description', {
            chart: {
                backgroundColor: '#0a0b29'
            },
            credits: {
                enabled: false
            },
            series: [{
                type: 'wordcloud',
                data: data,
                name: 'Occurrences',
                rotation: {
                    from: 0,
                    to: 0,
                },
            }],
            title: {
                text: '',
                style: {
                    color: '#FFF',
            }
        }
    });
        </script>
    </section>

    <section class="body-content" id="body-comment-post">
        <ul id="comment-text">
        </ul>
    </section>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
        <script>
    AOS.init();
    </script>
</body>
</html>
